摘要：
本项目旨在通过计算机程序将简谱转化为可播放的音乐文件，并探讨音乐的基本要素（音调、节拍、音色、基频、和弦等）如何在数据中反映。我们使用MATLAB编程实现了简谱到音乐数据的转换，并基于该数据生成了可播放的音乐和模仿特定乐器的音乐。通过本项目，我们可以更好地理解音乐的构成和数字表示方法，为音乐创作和计算机音乐领域的进一步研究提供了基础。

引言：
在数字化时代，将音乐用计算机程序表示和生成已成为可能。本项目旨在探索音乐的基本要素，并通过MATLAB编程实现将简谱转化为可播放的音乐。

在本项目中，我们首先介绍了音乐的基本要素，包括音调、节拍、基频和和弦。然后，我们探讨了如何将这些音乐要素反映在计算机程序生成的数据中。我们将简谱表示为一个M * N的矩阵，其中N表示通道数，每个元素表示特定时间点的音高或其他音乐要素。

接下来，我们使用MATLAB编程实现了简谱到音乐数据的转换。通过编写程序，我们可以将简谱中的音符和节拍信息映射到数据矩阵中，从而生成表示音乐的数据。然后，我们使用MATLAB内置的音乐播放功能，将数据转化为音频信号，并通过扬声器播放出来，最终保存成音频文件。

此外，通过研究特定乐器的音色特征，我们可以调整合成音乐函数程序的泛音系数等细节部分，使其更好的拟合特定乐器的声音，本实验主要研究了钢琴音色。

In the digital age, representing and generating music using computer programs has become possible. This project aims to explore the fundamental elements of music and implement the conversion of sheet music into playable music using MATLAB programming. In this project, we first introduce the basic elements of music, including pitch, rhythm, fundamental frequency, and chords. Then, we discuss how to reflect these musical elements in the data generated by a computer program. We represent sheet music as an M * N matrix, where N represents the number of channels, and each element represents the pitch or other musical elements at a specific time. Next, we use MATLAB programming to convert sheet music to music data. By writing a program, we can map the notes and rhythm information from the sheet music to the data matrix, thereby generating data that represents the music. Then, we use the built-in music playback functionality in MATLAB to convert the data into an audio signal and play it through speakers, ultimately saving it as an audio file. Furthermore, by studying the characteristics of specific instruments, we can adjust the details of the synthesizing music function program, such as the harmonic coefficients, to fit the sound of a particular instrument better. This experiment mainly focuses on the timbre of the piano.

1 数字简谱

通过数字简谱的信息，我们可以得到音调，节拍，基频等信息。

1.1 音调

简谱中 1、2、3、4、5、6、7（C、D、E、F、G、A、B）表示七种高低不同的音，我们称之为音调。在十二平均律下，所有 音符之间的频率比值相等，因此可以通过这个倍数来计算。简谱上出现的数字 1 - 7 加上升降调就有了 12 种音符，再加上上下的小圆点，就有了 12 x N（N 个八度）种音符。我们这里采用3 个变量 tone ，控制 1 - 7 的 基本音级(以l=440Hz为主音)





、noctave相差多少个八度，



rising升降调。

In numbered musical notation, the numbers 1, 2, 3, 4, 5, 6, 7 (C, D, E, F, G, A, B) represent seven different pitches, which we refer to as tones. In the 12-tone equal temperament system, the frequency ratios between all the notes are equal, allowing us to calculate them using these multiples. By adding accidentals to the numbers 1-7  we can create 12 different pitches. Additionally, by using dots above or below the numbers, we can extend these pitches across multiple octaves. Here, we are using three variables: "tone" to control the basic pitch level of 1-7 (with A4 at 440Hz ), "noctave" to determine the number of octaves difference, and "rising" to indicate whether the pitch is raised or lowered.

练习二：在tonefreq1中，我们采用A4=440Hz为基准频率，接下来，我们通过一个新的参数scale，改变基频。

将我们的到的频率写给三角函数，就可以通过matlab播放。音乐信息中，还有rhythm这一重要信息。我们可以通过调节音符延续的时间，来实现rhythm。通过编程，将数字简谱中的每个音符都转换成1 - 7表示的音级（频率），再结合每个音符持续的时长，为每个音符生成对应的波形。

We can write the frequency that we generated into trigonometric functions and play it using $sound$ function in MATLAB In music, there is also an important piece of information called rhythm. We can achieve rhythm by adjusting the duration of each note. By programming, we can convert each note in the numeric notation into a musical scale represented by numbers 1 to 7. Then, by combining the duration of each note, we can generate the corresponding waveform for each note.







通过这次实验，我们系统的了解了通过MATLAB将简谱转化为音乐的过程。在模拟音乐时，先通过十二平均律还原对应的音符，节拍，再还原音色。通过听感以及波形对比来选取不同的基础波形函数，泛音系数，衰减函数，我们可以更好地模拟某种乐器的音色。同时，我们发现真实的乐曲更加复杂，比如钢琴音色衰减通常非常复杂，钢琴有延长音和顿音的区别等等。

Through this experiment, we understood the process of converting musical notation into music using MATLAB. When simulating music, we first restored the corresponding notes and rhythm using the equal temperament tuning system. Then, we focused on recreating the timbre of the instrument. By comparing the sound perception and waveforms, we selected different basic waveform functions, harmonic coefficients, and decay functions to simulate the timbre of a particular instrument better. Additionally, we discovered that real music is more complex. For example, the decay of piano sounds is often intricate, and there are distinctions between sustained notes and staccato notes.